using Microsoft.CodeAnalysis.CSharp.Syntax;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace DataModelLib.DataModels
{
	public class DatabaseModel : DataModel
	{

		public List<TableModel> TableModels
		{ 
			get; 
			private set; 
		}
		public string Namespace
		{
			get;
			private set;
		}
		public string ClassName
		{
			get;
			private set;
		}

		public DatabaseModel(string Namespace,string ClassName) : base()
		{
			TableModels = new List<TableModel>();
			this.Namespace = Namespace;this.ClassName = ClassName;
		}

		public override string GenerateCode()
		{
			string source =
			$$"""
			// <auto-generated/>
			using System;
			using System.Collections.Generic;

			namespace {{Namespace}}
			{
				public partial class {{ClassName}}Model
				{
					private {{ClassName}} dataSource;

					public {{ClassName}}Model({{ClassName}} DataSource)
					{
						this.dataSource=DataSource;
					}

			{{string.Join("\r\n", TableModels.Select(item=>item.GenerateCode())).Indent(2)}}
				}
			}
			""";

			return source;
		}

	}
}
